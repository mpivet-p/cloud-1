---
- name: Setup server 
  hosts: server
  remote_user: root

  vars:
    DB_USER: "wordpress"
    DB_NAME: "wordpress"
    DB_HOST: "db"
    WP_URL: "mpivet-p.42.fr"
    WP_TITLE: "mpivet-p"
    WP_ADMIN: "mpivet"
    WP_MAIL: "mpivet-p@student.42madrid.com"
    DOMAIN: "mpivet-p.fr"
  vars_file:
    - passwords.yml
# ansible-vault create passwords.yml
#passwords:
#  WP_PASS: "wordpress"
#  DB_PASS: "wordpress"

  roles:
    - role: setup
      tags: setup
    - role: mariadb
      tags: mariadb
    - role: phpmyadmin
      tags: phpmyadmin
    - role: wordpress
      tags: wordpress
    - role: nginx
      tags: nginx
